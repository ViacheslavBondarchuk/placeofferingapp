<div class="leaflet-map-container" th:fragment="geoapify-map">
    <div id="leaflet-map"></div>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <link rel="stylesheet" href="css/LeafletMap.css" crossorigin=""/>
    <script src="/js/geoapify-datafetcher.js" type="text/javascript"></script>
    <script src="/js/leaflet-map.js" type="text/javascript"></script>
    <script src="/js/tabs-control.js" type="text/javascript"></script>
    <div class="leaflet-controls">
        <div class="control-buttons">
            <button class="current-position-btn btn btn-primary" onclick="leaflet_map.show_current_position()">Show current position</button>
            <button class="current-position-btn btn btn-secondary" onclick="leaflet_map.show_places()">Show places</button>
        </div>

        <div class="tabs">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link tab-control-button active" id="rectangle-tab" shape-type="rectangle"
                            data-bs-toggle="tab" data-bs-target="#tab-content" type="button" role="tab"
                            aria-controls="rectangle" aria-selected="true">Rectangle
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link tab-control-button" id="circle-tab" shape-type="circle" data-bs-toggle="tab"
                            data-bs-target="#tab-content" type="button" role="tab" aria-controls="circle"
                            aria-selected="false">Circle
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link tab-control-button" id="specifier-tab" shape-type="point"
                            data-bs-toggle="tab" data-bs-target="#tab-content" type="button" role="tab"
                            aria-controls="specifier" aria-selected="false">Specifier
                    </button>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">
                <div th:insert="~{fragments/geoapify-tab-control}" class="tab-pane fade show" id="tab-content"
                     role="tabpanel" aria-labelledby="rectangle-tab"></div>
                <div th:insert="~{fragments/additional-buttons}"></div>
            </div>

        </div>
    </div>
    <script type="text/javascript">
        var leaflet_map;
        var tabs_controls;
        (async function () {
            leaflet_map = new LeafletMap();
            await leaflet_map.init();
            tabs_controls = new TabsControl(".tabs > .tab-content > div", ".tabs > ul li.nav-item > button");
            await tabs_controls.init();
        }());
    </script>
</div>
